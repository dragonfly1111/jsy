(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/order_details"],{"3c97":function(t,e,n){"use strict";n.r(e);var r=n("dcce"),i=n("7a52");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("4d07");var a,c=n("f0c5"),s=Object(c["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);e["default"]=s.exports},"4d07":function(t,e,n){"use strict";var r=n("b0f3"),i=n.n(r);i.a},"7a52":function(t,e,n){"use strict";n.r(e);var r=n("d79a"),i=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);e["default"]=i.a},"92ad":function(t,e,n){"use strict";(function(t){n("f0cb"),n("921b");r(n("66fd"));var e=r(n("3c97"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},b0f3:function(t,e,n){},d79a:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{detailsObj:"",imgHttp:"",idArr:[],source:"",discountPrice:0,discount:""}},methods:{to_remind:function(e){var n=(new Date).getTime(),r=t.getStorageSync("remindTime")?t.getStorageSync("remindTime"):n;console.log(n-r),n-r>=72e4&&t.removeStorageSync("remindArr"),0==this.idArr.length?(this.idArr.push(e),this.hint("提醒发货成功")):-1===this.idArr.indexOf(e)?(this.hint("提醒发货成功"),this.idArr.push(e)):this.hint("已发起提醒，请不要重复点击"),t.setStorageSync("remindArr",JSON.stringify(this.idArr)),t.setStorageSync("remindTime",n)},refundOrder:function(){t.navigateTo({url:"./order_refund?id="+this.detailsObj.id+"&&type=1"})},evaluateOrder:function(){var e=this,n={token:t.getStorageSync("token"),userid:t.getStorageSync("customer").userid,orderid:e.detailsObj.id,evaluateValue:5,evaluateMsg:"默认好评"};this.ask("/app/order/evaluateOrder","POST",n,function(n){console.log(n),e.hint("订单完成"),t.navigateBack({delta:1})})},deleteOrder:function(e){var n=this,r={token:t.getStorageSync("token"),userid:t.getStorageSync("customer").userid,orderid:n.detailsObj.id};t.showModal({title:"提示",content:"确定是否删除该项订单？",success:function(e){e.confirm&&n.ask("/app/order/deleteOrder","POST",r,function(e){n.hint(e.data.msg),t.navigateBack({delta:1})})}})},reduceOrder:function(){var e=this,n={token:t.getStorageSync("token"),userid:t.getStorageSync("customer").userid,orderid:e.detailsObj.id};t.showModal({title:"提示",content:"请确认取消订单？",success:function(r){r.confirm&&e.ask("/app/order/cancelOrder","POST",n,function(n){e.hint(n.data.msg),t.navigateBack({delta:1})})}})},pay:function(){var e=this;t.login({success:function(n){console.log(r);var r={token:t.getStorageSync("token"),orderid:e.detailsObj.id,userid:t.getStorageSync("customer").userid,code:n.code};e.ask("/app/order/payOrder","POST",r,function(n){console.log(n),t.requestPayment({provider:"wxpay",timeStamp:n.data.data.timeStamp+"",nonceStr:n.data.data.nonceStr,package:n.data.data.package,signType:"MD5",paySign:n.data.data.sign,success:function(n){console.log("success",n),e.hint("订单支付成功"),t.navigateBack({delta:1})},fail:function(e){console.log("fail",e),"requestPayment:fail:[payment微信:-1]General errors"==e.errMsg?t.showToast({title:"支付失败!",icon:"none"}):t.showToast({title:"用户取消支付!",icon:"none"})}})})},fail:function(){e.hint("登录失败")}})},getDetails:function(e){var n=this,r={token:t.getStorageSync("token"),orderid:e,userid:t.getStorageSync("customer").userid};this.ask("/app/order/getOrderById","POST",r,function(t){console.log(t),n.detailsObj=t.data.data,n.discountPrice=Math.floor(Number(n.detailsObj.totalprice)*(1-n.discount/10)*100)/100})},sureDelivery:function(){var e=this,n={token:t.getStorageSync("token"),userid:t.getStorageSync("customer").userid,orderid:e.detailsObj.id};console.log(n),t.showModal({title:"提示",content:"请确认订单商品已经收到？",success:function(r){r.confirm&&(console.log("确认收货事件！"),e.ask("/app/order/confirmOrder","POST",n,function(n){console.log(n),e.hint(n.data.msg),t.navigateBack({delta:1})}))}})}},onLoad:function(e){this.discount=Number(t.getStorageSync("customer").discount),0==this.discount&&(this.discount=10),this.imgHttp=this.comHttp,this.source=e.source,this.idArr=t.getStorageSync("remindArr")?JSON.parse(t.getStorageSync("remindArr")):[],this.getDetails(e.id)},onBackPress:function(){"goodsDetails"==this.source&&t.switchTab({url:"../home/home"})}};e.default=n}).call(this,n("543d")["default"])},dcce:function(t,e,n){"use strict";var r,i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.idArr.includes(t.detailsObj.id)),r=t.idArr.includes(t.detailsObj.id);t.$mp.data=Object.assign({},{$root:{g0:n,g1:r}})},o=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return r})}},[["92ad","common/runtime","common/vendor"]]]);