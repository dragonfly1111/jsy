(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/order"],{"2ff0":function(t,e,r){"use strict";var a=r("9d87"),n=r.n(a);n.a},5766:function(t,e,r){"use strict";r.r(e);var a=r("fda9"),n=r.n(a);for(var i in a)"default"!==i&&function(t){r.d(e,t,function(){return a[t]})}(i);e["default"]=n.a},"6b9f":function(t,e,r){"use strict";r.r(e);var a=r("bb30"),n=r("5766");for(var i in n)"default"!==i&&function(t){r.d(e,t,function(){return n[t]})}(i);r("2ff0");var o,s=r("f0c5"),d=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);e["default"]=d.exports},"9d87":function(t,e,r){},bb30:function(t,e,r){"use strict";var a,n=function(){var t=this,e=t.$createElement,r=(t._self._c,t.__map(t.allArr,function(e,r){var a=e.order_number.indexOf("openMember"),n=e.order_number.indexOf("openMember"),i=t.idArr.includes(e.id),o=t.idArr.includes(e.id);return{$orig:t.__get_orig(e),g0:a,g1:n,g2:i,g3:o}})),a=t.__map(t.unshipped,function(e,r){var a=t.idArr.includes(e.id),n=t.idArr.includes(e.id);return{$orig:t.__get_orig(e),g4:a,g5:n}});t.$mp.data=Object.assign({},{$root:{l0:r,l1:a}})},i=[];r.d(e,"b",function(){return n}),r.d(e,"c",function(){return i}),r.d(e,"a",function(){return a})},ca15:function(t,e,r){"use strict";(function(t){r("f0cb"),r("921b");a(r("66fd"));var e=a(r("6b9f"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("543d")["createPage"])},fda9:function(t,e,r){"use strict";(function(t){function r(t){return i(t)||n(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{imgHttp:"",currentNav:0,idArr:[],state:"",allArr:[],arrearage:[],unshipped:[],waitReceiving:[],noEvaluate:[],maxallArr:0,maxarrearage:0,maxunshipped:0,maxwaitReceiving:0,maxnoEvaluate:0}},methods:{to_order_details:function(e,r){console.log(r),-1==r.indexOf("openMember")&&(console.log(e),t.navigateTo({url:"./order_details?id="+e}))},refundOrder:function(e){t.navigateTo({url:"./order_refund?id="+e+"&&type=0"})},evaluateOrder:function(e){var r=this,a={token:t.getStorageSync("token"),userid:t.getStorageSync("customer").userid,orderid:e,evaluateValue:5,evaluateMsg:"默认好评"};this.ask("/app/order/evaluateOrder","POST",a,function(t){console.log(t),r.hint("订单完成"),r.allArr=[],r.getOrderList(!0)})},deleteOrder:function(e){var r=this,a={token:t.getStorageSync("token"),userid:t.getStorageSync("customer").userid,orderid:e};t.showModal({title:"提示",content:"确定是否删除该项订单？",success:function(t){t.confirm&&r.ask("/app/order/deleteOrder","POST",a,function(t){r.hint(t.data.msg),r.allArr=[],r.getOrderList(!0)})}})},confirmOrder:function(e){var r=this;t.showModal({title:"提示",content:"请确认订单商品已经收到？",success:function(a){if(a.confirm){var n={token:t.getStorageSync("token"),userid:t.getStorageSync("customer").userid,orderid:e};r.ask("/app/order/confirmOrder","POST",n,function(t){console.log(t),r.hint(t.data.msg),r.allArr=[],r.waitReceiving=[],r.getOrderList(!0)})}}})},to_remind:function(e){var r=(new Date).getTime(),a=t.getStorageSync("remindTime")?t.getStorageSync("remindTime"):r;console.log(r-a),r-a>=144e4&&t.removeStorageSync("remindArr"),0==this.idArr.length?(this.idArr.push(e),this.hint("提醒发货成功")):-1===this.idArr.indexOf(e)?(this.hint("提醒发货成功"),this.idArr.push(e)):this.hint("已发起提醒，请不要重复点击"),t.setStorageSync("remindArr",JSON.stringify(this.idArr)),t.setStorageSync("remindTime",r)},to_order_fill:function(e){var r=this;t.login({success:function(a){console.log(n);var n={token:t.getStorageSync("token"),orderid:e.id,userid:t.getStorageSync("customer").userid,code:a.code};r.ask("/app/order/payOrder","POST",n,function(e){console.log(e),t.requestPayment({provider:"wxpay",timeStamp:e.data.data.timeStamp+"",nonceStr:e.data.data.nonceStr,package:e.data.data.package,signType:"MD5",paySign:e.data.data.sign,success:function(t){console.log("success",t),r.hint("订单支付成功"),r.allArr=[],r.arrearage=[],r.unshipped=[],r.waitReceiving=[],r.noEvaluate=[],r.currentNav=1,r.state="1",r.getOrderList(!0)},fail:function(e){console.log("fail",e),"requestPayment:fail:[payment微信:-1]General errors"==e.errMsg?t.showToast({title:"支付失败!",icon:"none"}):t.showToast({title:"用户取消支付!",icon:"none"})}})})},fail:function(){r.hint("登录失败")}})},chooseNav:function(t){this.currentNav=t,this.state=t+"","-1"==this.state&&(this.state=""),0==this.currentNav&&0==this.arrearage.length?(this.state="0",this.getOrderList(!0)):1==this.currentNav&&0==this.unshipped.length?(this.state="1",this.getOrderList(!0)):2==this.currentNav&&0==this.waitReceiving.length?(this.state="2",this.getOrderList(!0)):"-1"==this.currentNav&&0==this.allArr.length&&(this.state="",this.getOrderList(!0))},getOrderList:function(e){var a=this,n={token:t.getStorageSync("token"),userid:t.getStorageSync("customer").userid,state:this.state,page:1,pagesize:100};this.ask("/app/order/getOrderList","POST",n,function(t){var n;if(console.log(t),1==e)"0"==a.state?(a.arrearage=t.data.data,a.maxarrearage=t.data.count):"1"==a.state?(a.unshipped=t.data.data,a.maxunshipped=t.data.count):"2"==a.state?(a.waitReceiving=t.data.data,a.maxwaitReceiving=t.data.count):""==a.state&&(a.allArr=t.data.data,a.maxallArr=t.data.count);else if("0"==a.state&&a.maxarrearage!=a.arrearage.length)(n=a.arrearage).push.apply(n,r(t.data.data));else if("1"==a.state&&a.maxunshipped!=a.unshipped.length){var i;(i=a.unshipped).push.apply(i,r(t.data.data))}else if("2"==a.state&&a.maxwaitReceiving!=a.waitReceiving){var o;(o=a.waitReceiving).push.apply(o,r(t.data.data))}else if(""==a.state&&a.maxallArr!=a.allArr.length){var s;(s=a.allArr).push.apply(s,r(t.data.data))}})}},onLoad:function(e){this.imgHttp=this.comHttp,this.currentNav=e.type,this.state=e.type;var r=(new Date).getTime(),a=t.getStorageSync("remindTime")?t.getStorageSync("remindTime"):r;r-a>=144e4?t.removeStorageSync("remindArr"):this.idArr=t.getStorageSync("remindArr")?JSON.parse(t.getStorageSync("remindArr")):[]},onShow:function(){this.getOrderList(!0)},onReachBottom:function(){this.getOrderList(!1)}};e.default=o}).call(this,r("543d")["default"])}},[["ca15","common/runtime","common/vendor"]]]);