(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/commodity/commodity"],{"0d52":function(t,e,s){"use strict";s.r(e);var i=s("a5a3"),r=s.n(i);for(var o in i)"default"!==o&&function(t){s.d(e,t,function(){return i[t]})}(o);e["default"]=r.a},"0e13":function(t,e,s){},"3d4e":function(t,e,s){"use strict";s.r(e);var i=s("51b5"),r=s("0d52");for(var o in r)"default"!==o&&function(t){s.d(e,t,function(){return r[t]})}(o);s("e24f");var n,a=s("f0c5"),c=Object(a["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],n);e["default"]=c.exports},"51b5":function(t,e,s){"use strict";var i,r=function(){var t=this,e=t.$createElement,s=(t._self._c,t.__map(t.goods,function(e,s){var i=t.__map(e.arr[0],function(e,s){var i=e.keyword.replace(","," ");return{$orig:t.__get_orig(e),g0:i}});return{$orig:t.__get_orig(e),l0:i}})),i=t.__map(t.typeList.flist[t.currentType].classify,function(e,s){var i=t.currentClassify.includes(e.id);return{$orig:t.__get_orig(e),g1:i}});t.$mp.data=Object.assign({},{$root:{l1:s,l2:i}})},o=[];s.d(e,"b",function(){return r}),s.d(e,"c",function(){return o}),s.d(e,"a",function(){return i})},a5a3:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(s("66fd"));function r(t){return t&&t.__esModule?t:{default:t}}var o={data:function(){return{cateMaskState:0,headerTop:0,cateHeight:0,currentType:0,typeList:{},goodsId:"",goodsPid:"",slist:[],sureType:[],goods:[{arr:[]}],imgHttp:"",currentOrder:0,state:"marketprice",currentSupplier:-1,currentArea:-1,currentClassify:[],selectObj:{},ishot:""}},onPageScroll:function(t){t.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},methods:{stopPrevent:function(){},chooseClassify:function(t){0==this.currentClassify.length?this.currentClassify.push(t):-1===this.currentClassify.indexOf(t)?this.currentClassify.push(t):this.currentClassify.splice(this.currentClassify.indexOf(t),1)},chooseArea:function(t){this.currentArea=t},chooseSupplier:function(t){this.currentSupplier=t},toDetails:function(e){t.navigateTo({url:"./goods_details?id="+e})},getNewList:function(t,e,s){var r=this,o={page:e,pagesize:10,classify:t.classify,area:t.area,supplier:t.supplier,ishot:r.ishot};console.log(o),this.ask("/app/index/getProductList","POST",o,function(o){if(console.log(o),1==s)i.default.set(r.goods[r.currentType],"arr",[o.data.data]),i.default.set(r.goods[r.currentType],"count",o.data.count),i.default.set(r.goods[r.currentType],"page",e+1),i.default.set(r.goods[r.currentType],"selectObj",t),r.cateMaskState=0;else{var n=r.goods[r.currentType].arr,a=n[0].concat(o.data.data);i.default.set(r.goods[r.currentType],"arr",[a]),i.default.set(r.goods[r.currentType],"page",e+1),r.goods.push([]),r.goods.pop()}r.orderSort(r.state)})},sureBtn:function(){for(var t=[],e=0;e<this.typeList.flist[this.currentType].classify.length;e++)for(var s=0;s<this.currentClassify.length;s++)this.typeList.flist[this.currentType].classify[e].id==this.currentClassify[s]&&t.push(this.currentClassify[s]);if(-1!=this.currentArea||-1!=this.currentSupplier||0!=t.length){var i=t.join(","),r=this.typeList.flist[this.currentType].area[this.currentArea]?this.typeList.flist[this.currentType].area[this.currentArea].area:"",o=this.typeList.flist[this.currentType].supplier[this.currentSupplier]?this.typeList.flist[this.currentType].supplier[this.currentSupplier].supplier:"";""==i&&(i=this.goods[this.currentType].id),this.selectObj={classify:i,area:r,supplier:o},this.getNewList(this.selectObj,1,!0)}else this.hint("请选择过滤条件")},resetBtn:function(){this.currentClassify=[],this.currentArea=-1,this.currentSupplier=-1,console.log(this.typeList),console.log(this.currentType),console.log(this.typeList.flist[this.currentType].id),this.selectObj.classify=this.typeList.flist[this.currentType].id,this.selectObj.area="",this.selectObj.supplier="",this.getNewList(this.selectObj,1,!0)},chooseType:function(e,s){this.currentType=s,this.goodsId=e,this.filtrationType(),this.orderSort(this.state),t.setStorageSync("actNav",e)},chooseOrder:function(t){this.currentOrder=t,this.state=0==t?"marketprice":1==t?"salesvolume":"sellingprice",this.orderSort(this.state)},orderSort:function(t){0!=this.goods[this.currentType].arr[0].length&&(console.log(this.goods[this.currentType].arr[0].length),this.goods[this.currentType].arr[0].sort(this.compare(t)))},compare:function(t){return function(e,s){var i=e[t],r=s[t];return r-i}},handleChildType:function(t,e,s){for(var i=0;i<this.slist[s].tlist.length;i++)this.slist[s].tlist[i].actNum=e;this.slist.push([]),this.slist.pop()},toggleCateMask:function(t){var e="show"===t?1:0;this.cateMaskState=e},getClassify:function(){var e=this;this.ask("/app/index/getClassify","POST",{},function(s){console.log(s),e.typeList=s.data,e.goodsId=e.typeList.flist[0].id,e.goods.length=e.typeList.flist.length,e.filtrationType();for(var i=0;i<e.goods.length;i++)e.goods[i]={arr:[],id:e.typeList.flist[i].id},e.getGoodsList(e.typeList.flist[i].id,i);if(t.getStorageSync("actNav"))for(var r=0;r<e.typeList.flist.length;r++)e.typeList.flist[r].id==t.getStorageSync("actNav")&&(e.currentType=r);else e.currentType=0})},filtrationType:function(t,e){this.slist=[];for(var s=0;s<this.typeList.slist.length;s++)this.typeList.slist[s].pid==this.goodsId&&(this.typeList.slist[s].tlist=[],this.slist.push(this.typeList.slist[s]))},getGoodsList:function(t,e){var s=this,i={page:1,pagesize:10,classify:t,area:"",supplier:"",ishot:s.ishot};console.log(i),this.ask("/app/index/getProductList","POST",i,function(i){s.goods[e].arr.push(i.data.data),s.goods[e].count=i.data.count,s.goods[e].page=2,s.goods[e].id=t,s.goods[e].selectObj={classify:"",area:"",supplier:""},s.goods.push([]),s.goods.pop()})}},onLoad:function(t){console.log(t),this.imgHttp=this.comHttp,this.getClassify()},onShow:function(){var e=this;if("hot"==t.getStorageSync("actNav"))return e.ishot="1",void(e.currentType=0);if(t.getStorageSync("actNav")){e.ishot="";for(var s=0;s<e.typeList.flist.length;s++)e.typeList.flist[s].id==t.getStorageSync("actNav")&&(e.currentType=s)}else e.currentType=0},onReachBottom:function(){var t=this.goods[this.currentType].selectObj,e=this.goods[this.currentType].page,s=this.goods[this.currentType].count;this.goods[this.currentType].arr[0].length>=s||this.getNewList(t,e,!1)},created:function(){this.headerTop=this.CustomBar+"px",this.cateHeight=t.getSystemInfoSync().windowHeight-this.CustomBar+"px"}};e.default=o}).call(this,s("543d")["default"])},d191:function(t,e,s){"use strict";(function(t){s("f0cb"),s("921b");i(s("66fd"));var e=i(s("3d4e"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("543d")["createPage"])},e24f:function(t,e,s){"use strict";var i=s("0e13"),r=s.n(i);r.a}},[["d191","common/runtime","common/vendor"]]]);